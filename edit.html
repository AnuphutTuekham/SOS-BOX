<!doctype html>
<html lang="th">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>SOS Box — Add/Edit</title>
		<link rel="icon" href="favicon.svg" type="image/svg+xml" />

		<!-- Leaflet (OpenStreetMap) -->
		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
			integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
			crossorigin=""
		/>
		<script
			src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
			integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
			crossorigin=""
		></script>

		<!-- Geocoder control (Nominatim) -->
		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet-control-geocoder@2.4.0/dist/Control.Geocoder.css"
		/>
		<link rel="stylesheet" href="css/styles.css" />
		<script src="https://unpkg.com/leaflet-control-geocoder@2.4.0/dist/Control.Geocoder.js" defer></script>
		<script src="config.js"></script>
		<script src="js/editor.js" defer></script>
	</head>
	<body>
		<div class="app">
			<aside class="sidebar">
				<div class="brand" style="justify-content: space-between; align-items: center">
					<div style="display:flex; gap:10px; align-items:center;">
						<div class="dot" aria-hidden="true"></div>
						<div>
							<h1>เพิ่ม/แก้ไข SOS BOX</h1>
							<div class="sub" id="modeText">-</div>
							<div class="sub" data-testid="group-info">กลุ่ม: กลุ่ม-01 | สมาชิก: 67022995 อนุภัทร ตื้อคำ</div>
						</div>
					</div>
					<button class="tiny" id="btnBack" type="button">กลับ</button>
				</div>

				<div class="card">
					<label>เลือกตำแหน่ง</label>
					<p class="sub">คลิกบนแผนที่เพื่อกำหนดพิกัด หรือค้นหาสถานที่ด้านบนแผนที่</p>
					<div class="row">
						<div><input id="lat" type="number" step="0.000001" placeholder="Latitude" /></div>
						<div><input id="lng" type="number" step="0.000001" placeholder="Longitude" /></div>
					</div>
					<div style="height: 10px"></div>
					<div class="btns">
						<button class="primary" id="btnLocate" type="button">หาตำแหน่งฉัน</button>
						<button id="btnCopyLatLng" type="button">คัดลอกพิกัด</button>
					</div>
				</div>

				<div class="card">
					<label>ข้อมูล SOS BOX</label>
					<input id="selectedId" type="text" placeholder="selectedId" style="display: none" />
					<input id="name" type="text" placeholder="ชื่อกล่อง (เช่น SOS BOX #12)" />
					<div style="height: 10px"></div>
					<div class="row">
						<div>
							<label>แบตเตอรี่ (%)</label>
							<input id="battery" type="number" min="0" max="150" step="1" value="100" />
							<div class="sub" style="margin-top: 6px; display:flex; align-items:center; gap:8px;">
								<img id="batteryPreview" class="batteryIcon" src="pic/green_battery.png" alt="battery" />
								<span id="batteryPreviewText">-</span>
							</div>
						</div>
						<div>
							<label>พาวเวอร์แบงก์ (mAh)</label>
							<input id="powerbankMah" type="number" min="0" step="100" value="10000" />
						</div>
					</div>
					<div style="height: 10px"></div>
					<div class="row">
						<div>
							<label>กำลังที่ใช้ (W)</label>
							<input id="loadW" type="number" min="1" step="0.5" value="5" />
						</div>
						<div>
							<label>Last seen</label>
							<input id="lastSeen" type="text" placeholder="-" disabled />
						</div>
					</div>
					<div style="height: 10px"></div>
					<textarea id="note" placeholder="รายละเอียดเพิ่มเติม (ไม่บังคับ)"></textarea>
					<div style="height: 10px"></div>
					<div class="btns">
						<button class="primary" id="btnSave" type="button">บันทึก</button>
						<button id="btnSeenNow" type="button">อัปเดต last seen = ตอนนี้</button>
						<button id="btnNew" type="button">เพิ่มรายการใหม่</button>
						<button class="danger" id="btnDelete" type="button">ลบรายการนี้</button>
					</div>
				</div>
			</aside>

			<main class="mapWrap">
				<div id="map" role="application" aria-label="Edit SOS BOX map"></div>
				<div class="toast" id="toast"></div>
			</main>
		</div>
	</body>
</html>
