<!doctype html>
<html lang="th">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>SOSBOX — หน้าเว็บหลัก</title>
		<link rel="icon" href="favicon.svg" type="image/svg+xml" />

		<!-- Leaflet (OpenStreetMap) -->
		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
			integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
			crossorigin=""
		/>
		<script
			src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
			integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
			crossorigin=""
		></script>

		<!-- Geocoder control (Nominatim) -->
		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet-control-geocoder@2.4.0/dist/Control.Geocoder.css"
		/>
		<link rel="stylesheet" href="css/styles.css" />
		<script
			src="https://unpkg.com/leaflet-control-geocoder@2.4.0/dist/Control.Geocoder.js"
			defer
		></script>
		<script src="config.js"></script>
		<script src="js/app.js" defer></script>
	</head>
	<body>
		<div class="app">
			<aside class="sidebar">
				<div class="brand">
					<div class="dot" aria-hidden="true"></div>
					<div>
						<h1>SOSBOX</h1>
						<div class="sub">หน้าเว็บหลักสำหรับติดตามสถานะและตำแหน่ง SOS BOX</div>
					</div>
				</div>

				<div class="card">
					<label>ภาพรวมระบบ</label>
					<p class="sub" style="margin-top: 6px">
						ดูตำแหน่งทั้งหมดแบบเรียลไทม์ จัดการสถานะ และอัปเดตข้อมูลกล่องได้จากหน้าเดียว
					</p>
					<div style="height: 10px"></div>
					<div class="btns">
						<button class="primary" id="btnLocate" type="button">เริ่มติดตามตำแหน่ง</button>
					</div>
					<p class="sub" style="margin-top: 8px">
						ใช้เมนู “เพิ่ม/แก้ไข SOS BOX” ด้านล่างเพื่อจัดการข้อมูล
					</p>
				</div>

				<div class="card">
					<div class="btns">
						<button id="btnCopyCenter" type="button">คัดลอกพิกัดกึ่งกลาง</button>
						<button id="btnShare" type="button">แชร์ลิงก์ตำแหน่ง</button>
					</div>
				</div>

				<div class="card">
					<div class="stats">
						<div class="stat">
							<div class="k">พิกัดกึ่งกลาง (lat, lng)</div>
							<div class="v" id="centerLatLng">-</div>
						</div>
						<div class="stat">
							<div class="k">ซูม</div>
							<div class="v" id="zoom">-</div>
						</div>
						<div class="stat">
							<div class="k">จำนวน SOS BOX</div>
							<div class="v" id="boxCount">0</div>
						</div>
						<div class="stat">
							<div class="k">สถานะ (ออนไลน์/ออฟไลน์/แบตต่ำ)</div>
							<div class="v" id="statusCounts">0 / 0 / 0</div>
						</div>
					</div>
				</div>

				<div class="card">
					<label>ตัวกรอง</label>
					<div class="row">
						<div>
							<label>แสดงสถานะ</label>
							<select id="statusFilter">
								<option value="all" selected>ทั้งหมด</option>
								<option value="online">ออนไลน์</option>
								<option value="offline">ออฟไลน์</option>
								<option value="low">แบตต่ำ</option>
							</select>
						</div>
						<div>
							<label>ถือว่าออฟไลน์ถ้าเกิน (นาที)</label>
							<input id="offlineAfterMin" type="number" min="1" step="1" value="30" />
						</div>
					</div>
					<p class="sub" style="margin-top: 10px">
						หมายเหตุ: ระบบจะ “ประเมินสถานะ” จากเวลา last seen + แบตเตอรี่ (แก้ได้ด้วยการอัปเดต last seen)
					</p>
				</div>

				<div class="card">
					<label>การจัดการ</label>
					<div class="btns">
						<button class="primary" id="btnOpenEditor" type="button">เพิ่ม/แก้ไข SOS BOX</button>
						<button class="danger" id="btnClearAll" type="button">ลบทั้งหมด</button>
					</div>
				</div>

				<div class="card">
					<label>รายการ SOS BOX</label>
					<div class="list" id="boxList"></div>
				</div>
			</aside>

			<main class="mapWrap">
				<div id="map" role="application" aria-label="Interactive map"></div>
				<div class="toast" id="toast"></div>
			</main>
		</div>


	</body>
</html>
